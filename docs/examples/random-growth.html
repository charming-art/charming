<!doctype html>
<notebook theme="air">
  <title>Random Growth</title>
  <script id="0" type="text/markdown">
    # Random Growth

    ${quote}
  </script>
  <script id="15" type="application/vnd.observable.javascript">
    viewof replay = Inputs.button("Replay")
  </script>
  <script id="8" type="application/vnd.observable.javascript" pinned="">
    {
      replay;

      const width = 600,
        height = 200,
        N = cm.range(15).map(() => 0),
        step = width / N.length;

      function update(app) {
        const index = cm.random(N.length) | 0;
        N[index] += 1;
        app.data(N).append(cm.rect, {
          x: (_, i) => i * step,
          y: (d) => app.prop("height") - d,
          width: step - 2,
          height: (d) => d,
          fill: cm.rgb(127),
          stroke: "black"
        });
      }

      function dispose(app) {
        invalidation.then(() => app.dispose());
      }

      return cm
        .app({ width, height })
        .on("update", update)
        .call(dispose)
        .start()
        .node();
    }
  </script>
  <script id="5" type="application/vnd.observable.javascript" pinned="">
    cm = require("@charming-art/charming@0.0.6")
  </script>
  <script id="23" type="application/vnd.observable.javascript" pinned="">
    import { quote } from "@pearmini/charming-shared"
  </script>
</notebook>
