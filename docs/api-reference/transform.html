<!doctype html>
<notebook theme="air">
  <title>Transform</title>
  <script id="0" type="text/markdown">
    # Transform
    
    Deriving shape attribute values.
    
    ## _cm_.**mapAttrs**
    
    Maps abstract attributes to visual attributes with scales. Each scale's options are specified as a nested options object with the corresponding attribute name.
    
    ```js
    app
      .append(cm.circle, {
        x: (d) => d[0],
        y: (d) => d[1],
      })
      .transform(cm.mapAttrs, {
        x: {}, // scale for x attribute
        y: {}, // scale for y attribute
      });
    ```
    
    A scale's domain is typically inferred automatically. It can be customized explicitly by these options:
    
    - **scale** - [scale](#scale), defaults to [scaleLinear](#cm-scaleLinear)
    - **domain** - abstract values, typically _[min, max]_
    - **range** - visual values, typically _[min, max]_
    
    ```js
    app
      .append(cm.circle, {
        x: (d) => d[0],
        y: (d) => d[1],
      })
      .transform(cm.mapAttrs, {
        x: {
          scale: cm.scaleLog,
          range: [0, app.prop("height")],
        },
      });
    ```
    
    ## _cm_.**mapPosition**
    
    Map abstract position to visual position. Like [mapAttrs](#cm-mapAttrs), but only maps position attributes to corresponding dimension range.
    
    For x attributes, such as x and x1, the scale's range is _[0, app.prop("width")]_ by default. For y attributes, such as y and y1, the scale's range is _[0, app.prop("height")]_ by default.
    
    - **scaleX** - [scale](#scale) for x attributes, defaults to [scaleLinear](#cm-scaleLinear)
    - **scaleY** - [scale](#scale) for y attributes, defaults to [scaleLinear](#cm-scaleLinear)
    - **domainX** - abstract values for x attributes, typically _[min, max]_
    - **domainY** - abstract values for y attributes, typically _[min, max]_
    - **reverseX** - reverses range for x attributes, defaults to false
    - **reverseY** - reverses range for y attributes, defaults to false
    - **padding** - space between shapes and border, defaults to 0
    
    ```js
    app
      .append(cm.line, {
        x: (d) => d[0],
        y: (d) => d[0],
      })
      .transform(cm.mapPosition, {
        scaleX: cm.scaleLog,
        reverseY: true,
        padding: 15,
      });
    ```
  </script>
</notebook>
