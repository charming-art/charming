<!doctype html>
<notebook theme="air">
  <title>Process</title>
  <script id="0" type="text/markdown">
    # Process
    
    Preparing data to be rendered.
    
    ## _cm_.**each**
    
    Calls the specified _function_ on each datum of a flow, and returns a new flow that contains the data. The function is being passed the current datum(_d_), the current index(_i_), the current group(_data_) and the flow(_flow_).
    
    ```js
    const data = [
      { name: "Locke", number: 4 },
      { name: "Reyes", number: 8 },
      { name: "Ford", number: 15 },
      { name: "Jarrah", number: 16 },
      { name: "Shephard", number: 23 },
      { name: "Kwon", number: 42 },
    ];
    
    app.data(data).process(cm.each, (d) => d.number * 2);
    ```
    
    ## _cm_.**eachRight**
    
    Like [cm.each](#cm-each), except iterates from right to left.
    
    ```js
    const data = [
      { name: "Locke", number: 4 },
      { name: "Reyes", number: 8 },
      { name: "Ford", number: 15 },
      { name: "Jarrah", number: 16 },
      { name: "Shephard", number: 23 },
      { name: "Kwon", number: 42 },
    ];
    
    app.data(data).process(cm.eachRight, (d, i, data) => {
      if (d.number > 30) data.splice(i, 1);
    });
    ```
    
    ## _cm_.**filter**
    
    Calls the specified _function_ on each datum of a flow, and returns a new flow that contains the data meeting true condition. The function is being passed the current datum(_d_), the current index(_i_), the current group(_data_) and the flow(_flow_).
    
    ```js
    const data = [
      { name: "Locke", number: 4 },
      { name: "Reyes", number: 8 },
      { name: "Ford", number: 15 },
      { name: "Jarrah", number: 16 },
      { name: "Shephard", number: 23 },
      { name: "Kwon", number: 42 },
    ];
    
    app.data(data).process(cm.filter, (d) => d.number % 2 === 0);
    ```
    
    ## _cm_.**map**
    
    Calls the specified _function_ on each datum of a flow, and returns a new flow that contains the new data. The function is being passed the current datum(_d_), the current index(_i_), the current group(_data_) and the flow(_flow_).
    
    ```js
    const data = [
      { name: "Locke", number: 4 },
      { name: "Reyes", number: 8 },
      { name: "Ford", number: 15 },
      { name: "Jarrah", number: 16 },
      { name: "Shephard", number: 23 },
      { name: "Kwon", number: 42 },
    ];
    
    app.data(data).process(cm.map, (d) => ({ ...d, number: d.number * 2 }));
    ```
    
    ## _cm_.**derive**
    
    Calls _value_ on each datum of a flow to derive a new field _key_ for each entries of the specified object, and returns a new flow that contains the new data. The value is being passed the current datum(_d_), the current index(_i_), the current group(_data_) and the flow(_flow_).
    
    ```js
    const data = [
      { name: "Locke", number: 4 },
      { name: "Reyes", number: 8 },
      { name: "Ford", number: 15 },
      { name: "Jarrah", number: 16 },
      { name: "Shephard", number: 23 },
      { name: "Kwon", number: 42 },
    ];
    
    app.data(data).process(cm.derive, {
      double: (d) => d.name * 2,
      upper: (d) => d.name.toUpperCase(),
    });
    ```
    
    ## _cm_.**push**
    
    Appends the specified _datum_ to a flow, and returns a new flow that contains the new datum.
    
    If _datum_ is not a function, appends it to all groups.
    
    ```js
    const data = [
      { name: "Locke", number: 4 },
      { name: "Reyes", number: 8 },
      { name: "Ford", number: 15 },
      { name: "Jarrah", number: 16 },
      { name: "Shephard", number: 23 },
      { name: "Kwon", number: 42 },
    ];
    
    app.data(data).process(cm.push, { name: "Jim", number: 25 });
    ```
    
    If the flow has multiple groups(such as [flow.data](#flow-data) followed by [app.data](#app-data)), then _datum_ should typically be specified as a function. The function will be evaluated for each group in order, being passed the group(_group_), the group index(_i_), all the groups(_data_) and this flow(_flow_).
    
    ```js
    const matrix = [
      [" +", "-", "+ "],
      [" |", cm.wch("ðŸš€"), "| "],
      [" +", "-", "+ "],
    ];
    
    app
      .data(matrix)
      .append(cm.group, { y: (_, i) => i })
      .data((d) => d)
      .process(cm.push, (group, i, groups) => ` ${i}`);
    ```
  </script>
</notebook>
